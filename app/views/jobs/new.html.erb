<% content_for :title, t("job_applications.new_application") %>

<div class="w-full max-w-4xl mx-auto">
  <!-- Header -->
  <div class="mb-8">
    <div class="flex items-center space-x-4">
      <%= link_to jobs_path, class: "inline-flex items-center text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors duration-200" do %>
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
        </svg>
        <%= t("job_applications.back_to_applications") %>
      <% end %>
    </div>
    <h1 class="text-3xl font-bold text-gray-900 dark:text-white mt-4"><%= t("job_applications.new_application") %></h1>
    <p class="text-gray-600 dark:text-gray-300 mt-2">Lägg till en ny jobbansökan i din lista</p>
  </div>

  <!-- Form Card -->
  <div class="card">
    <form action="<%= jobs_path %>" method="POST" class="p-6 space-y-6">
      <%= csrf_meta_tags %>
      <input type="hidden" name="authenticity_token" value="<%= form_authenticity_token %>">

      <!-- Basic Information Section -->
      <div class="space-y-4">
        <h2 class="text-lg font-semibold text-gray-900 dark:text-white flex items-center">
          <svg class="w-5 h-5 mr-2 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
          </svg>
          Grundläggande information
        </h2>
        
        <!-- Two column layout for basic info -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <%= render 'shared/form_input' %>
          
          <div>
            <label for="company" class="form-label">
              Company <span class="text-red-500">*</span>
            </label>
            <input 
              type="text" 
              id="company" 
              name="job[company]" 
              required
              class="form-input"
              placeholder="Ex: TechCorp Solutions">
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label for="location" class="form-label">
              Location <span class="text-red-500">*</span>
            </label>
            <input 
              type="text" 
              id="location" 
              name="job[location]" 
              required
              class="form-input"
              placeholder="Ex: Stockholm, Sweden">
          </div>
          
          <div>
            <label for="source" class="form-label">
              Source <span class="text-red-500">*</span>
            </label>
            <select 
              id="source" 
              name="job[source]" 
              required
              class="form-select">
              <option value="">Select source</option>
              <option value="LinkedIn">LinkedIn</option>
              <option value="Indeed">Indeed</option>
              <option value="Blocket Jobb">Blocket Jobb</option>
              <option value="Arbetsförmedlingen">Arbetsförmedlingen</option>
              <option value="Other">Other</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Separator -->
      <div class="separator"></div>

      <!-- Salary and Status Section -->
      <div class="space-y-4">
        <h2 class="section-header">
          <svg class="w-5 h-5 mr-2 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          </svg>
          Löner och status
        </h2>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <div>
            <label for="salary_min" class="form-label">
              Min Salary
            </label>
            <input 
              type="text" 
              id="salary_min" 
              name="job[salary_min]" 
              class="form-input"
              placeholder="Ex: 400000">
          </div>
          
          <div>
            <label for="salary_max" class="form-label">
              Max Salary
            </label>
            <input 
              type="text" 
              id="salary_max" 
              name="job[salary_max]" 
              class="form-input"
              placeholder="Ex: 600000">
          </div>
          
          <div>
            <label for="salary_type" class="form-label">
              Salary Type
            </label>
            <select 
              id="salary_type" 
              name="job[salary_type]" 
              class="form-select">
              <option value="yearly">Yearly</option>
              <option value="monthly">Monthly</option>
              <option value="hourly">Hourly</option>
            </select>
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <%= render 'shared/form_select' %>
          
          <div>
            <label for="date_applied" class="form-label">
              Applied Date <span class="text-red-500">*</span>
            </label>
            <input 
              type="date" 
              id="date_applied" 
              name="job[date_applied]" 
              required
              class="form-input">
          </div>
        </div>
      </div>

      <!-- Separator -->
      <div class="border-t border-gray-200 dark:border-gray-700 pt-6"></div>

      <!-- Additional Information Section -->
      <div class="space-y-4">
        <h2 class="section-header">
          <svg class="w-5 h-5 mr-2 text-purple-600 dark:text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
          </svg>
          Ytterligare information
        </h2>
        
        <div>
          <label for="description" class="form-label">
            Jobbeskrivning
          </label>
          <textarea 
            id="description" 
            name="job[description]" 
            rows="4"
            class="form-input"
            placeholder="Beskriv jobbet, ansvarsområden och krav..."><%= @job[:description] %></textarea>
        </div>

        <%= render 'shared/form_input', 
          id: "job_url", 
          name: "job[job_url]", 
          type: "url", 
          label: "Länk till annons", 
          value: @job[:job_url], 
          placeholder: "https://exempel.se/jobb",
          required: false %>

        <div>
          <label for="notes" class="form-label">
            Personliga anteckningar
          </label>
          <textarea 
            id="notes" 
            name="job[notes]" 
            rows="3"
            class="form-input"
            placeholder="Spar dina tankar, kontaktinformation eller viktig detaljer..."><%= @job[:notes] %></textarea>
        </div>
      </div>

      <!-- Form Actions -->
      <div class="separator">
        <div class="flex justify-end space-x-3">
          <%= link_to jobs_path, class: "btn-secondary" do %>
            Avbryt
          <% end %>
          <button type="submit" class="btn-primary flex items-center">
            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
            </svg>
            <%= t("job_applications.save_application") %>
          </button>
        </div>
      </div>
    </form>
  </div>
</div>